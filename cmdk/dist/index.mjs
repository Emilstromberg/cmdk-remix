import{a as oe}from"./chunk-XJATAMEX.mjs";import*as T from"@radix-ui/react-dialog";import*as t from"react";var ue='[cmdk-list-sizer=""]',_='[cmdk-group=""]',W='[cmdk-group-items=""]',de='[cmdk-group-heading=""]',B='[cmdk-item=""]',ae=`${B}:not([aria-disabled="true"])`,K="cmdk-item-select",x="data-value",fe=(n,a)=>oe(n,a),ce=t.createContext(void 0),H=()=>t.useContext(ce),se=t.createContext(void 0),G=()=>t.useContext(se),J=t.createContext(void 0),ie=t.forwardRef((n,a)=>{let r=t.useRef(null),o=P(()=>{var e;return{search:"",value:n.value??((e=n.defaultValue)==null?void 0:e.toLowerCase())??"",filtered:{count:0,items:new Map,groups:new Set}}}),s=P(()=>new Set),f=P(()=>new Map),m=P(()=>new Map),g=P(()=>new Set),u=Q(n),{label:h,children:v,value:R,onValueChange:C,filter:M,shouldFilter:E,...k}=n,N=t.useId(),y=t.useId(),I=t.useId(),d=xe();D(()=>{if(R!==void 0){let e=R.trim().toLowerCase();o.current.value=e,d(6,Z),b.emit()}},[R]);let b=t.useMemo(()=>({subscribe:e=>(g.current.add(e),()=>g.current.delete(e)),snapshot:()=>o.current,setState:(e,l,c)=>{var i,p,S;if(!Object.is(o.current[e],l)){if(o.current[e]=l,e==="search")q(),j(),d(1,$);else if(e==="value")if(((i=u.current)==null?void 0:i.value)!==void 0){let w=l??"";(S=(p=u.current).onValueChange)==null||S.call(p,w);return}else c||d(5,Z);b.emit()}},emit:()=>{g.current.forEach(e=>e())}}),[]),F=t.useMemo(()=>({value:(e,l)=>{l!==m.current.get(e)&&(m.current.set(e,l),o.current.filtered.items.set(e,Y(l)),d(2,()=>{j(),b.emit()}))},item:(e,l)=>(s.current.add(e),l&&(f.current.has(l)?f.current.get(l).add(e):f.current.set(l,new Set([e]))),d(3,()=>{q(),j(),o.current.value||$(),b.emit()}),()=>{m.current.delete(e),s.current.delete(e),o.current.filtered.items.delete(e);let c=O();d(4,()=>{q(),(c==null?void 0:c.getAttribute("id"))===e&&$(),b.emit()})}),group:e=>(f.current.has(e)||f.current.set(e,new Set),()=>{m.current.delete(e),f.current.delete(e)}),filter:()=>u.current.shouldFilter,label:h||n["aria-label"],commandRef:r,listId:N,inputId:I,labelId:y}),[]);function Y(e){var c;let l=((c=u.current)==null?void 0:c.filter)??fe;return e?l(e,o.current.search):0}function j(){if(!r.current||!o.current.search||u.current.shouldFilter===!1)return;let e=o.current.filtered.items,l=[];o.current.filtered.groups.forEach(i=>{let p=f.current.get(i),S=0;p.forEach(w=>{let le=e.get(w);S=Math.max(le,S)}),l.push([i,S])});let c=r.current.querySelector(ue);V().sort((i,p)=>{let S=i.getAttribute(x),w=p.getAttribute(x);return(e.get(w)??0)-(e.get(S)??0)}).forEach(i=>{let p=i.closest(W);p?p.appendChild(i.parentElement===p?i:i.closest(`${W} > *`)):c.appendChild(i.parentElement===c?i:i.closest(`${W} > *`))}),l.sort((i,p)=>p[1]-i[1]).forEach(i=>{let p=r.current.querySelector(`${_}[${x}="${i[0]}"]`);p==null||p.parentElement.appendChild(p)})}function $(){let e=V().find(c=>!c.ariaDisabled),l=e==null?void 0:e.getAttribute(x);b.setState("value",l||void 0)}function q(){if(!o.current.search||u.current.shouldFilter===!1){o.current.filtered.count=s.current.size;return}o.current.filtered.groups=new Set;let e=0;for(let l of s.current){let c=m.current.get(l),i=Y(c);o.current.filtered.items.set(l,i),i>0&&e++}for(let[l,c]of f.current)for(let i of c)if(o.current.filtered.items.get(i)>0){o.current.filtered.groups.add(l);break}o.current.filtered.count=e}function Z(){var l,c,i;let e=O();e&&(((l=e.parentElement)==null?void 0:l.firstChild)===e&&((i=(c=e.closest(_))==null?void 0:c.querySelector(de))==null||i.scrollIntoView({block:"nearest"})),e.scrollIntoView({block:"nearest"}))}function O(){var e;return(e=r.current)==null?void 0:e.querySelector(`${B}[aria-selected="true"]`)}function V(){return Array.from(r.current.querySelectorAll(ae))}function z(e){let c=V()[e];c&&b.setState("value",c.getAttribute(x))}function U(e){var S;let l=O(),c=V(),i=c.findIndex(w=>w===l),p=c[i+e];(S=u.current)!=null&&S.loop&&(p=i+e<0?c[c.length-1]:i+e===c.length?c[0]:c[i+e]),p&&b.setState("value",p.getAttribute(x))}function ee(e){let l=O(),c=l==null?void 0:l.closest(_),i;for(;c&&!i;)c=e>0?Ce(c,_):ye(c,_),i=c==null?void 0:c.querySelector(ae);i?b.setState("value",i.getAttribute(x)):U(e)}let te=()=>z(V().length-1),ne=e=>{e.preventDefault(),e.metaKey?te():e.altKey?ee(1):U(1)},re=e=>{e.preventDefault(),e.metaKey?z(0):e.altKey?ee(-1):U(-1)};return t.createElement("div",{ref:A([r,a]),...k,"cmdk-root":"",onKeyDown:e=>{var l;if((l=k.onKeyDown)==null||l.call(k,e),!e.defaultPrevented)switch(e.key){case"n":case"j":{e.ctrlKey&&ne(e);break}case"ArrowDown":{ne(e);break}case"p":case"k":{e.ctrlKey&&re(e);break}case"ArrowUp":{re(e);break}case"Home":{e.preventDefault(),z(0);break}case"End":{e.preventDefault(),te();break}case"Enter":{e.preventDefault();let c=O();if(c){let i=new Event(K);c.dispatchEvent(i)}}}}},t.createElement("label",{"cmdk-label":"",htmlFor:F.inputId,id:F.labelId,style:Le},h),t.createElement(se.Provider,{value:b},t.createElement(ce.Provider,{value:F},v)))}),me=t.forwardRef((n,a)=>{var I;let r=t.useId(),o=t.useRef(null),s=t.useContext(J),f=H(),m=Q(n),g=((I=m.current)==null?void 0:I.forceMount)??(s==null?void 0:s.forceMount);D(()=>f.item(r,s==null?void 0:s.id),[]);let u=X(r,o,[n.value,n.children,o]),h=G(),v=L(d=>d.value&&d.value===u.current),R=L(d=>g||f.filter()===!1?!0:d.search?d.filtered.items.get(r)>0:!0);t.useEffect(()=>{let d=o.current;if(!(!d||n.disabled))return d.addEventListener(K,C),()=>d.removeEventListener(K,C)},[R,n.onSelect,n.disabled]);function C(){var d,b;M(),(b=(d=m.current).onSelect)==null||b.call(d,u.current)}function M(){h.setState("value",u.current,!0)}if(!R)return null;let{disabled:E,value:k,onSelect:N,...y}=n;return console.log("Creating a link"),t.createElement("a",{href:n.href,ref:A([o,a]),id:r,"cmdk-item":"",role:"option","aria-disabled":E||void 0,"aria-selected":v||void 0,"data-disabled":E||void 0,"data-selected":v||void 0,onPointerMove:E?void 0:M,onClick:E?void 0:C,className:y.className,defaultChecked:y.defaultChecked,defaultValue:y.defaultValue,suppressContentEditableWarning:y.suppressContentEditableWarning,suppressHydrationWarning:y.suppressHydrationWarning,accessKey:y.accessKey},n.children)}),ve=t.forwardRef((n,a)=>{var I;let r=t.useId(),o=t.useRef(null),s=t.useContext(J),f=H(),m=Q(n),g=((I=m.current)==null?void 0:I.forceMount)??(s==null?void 0:s.forceMount);D(()=>f.item(r,s==null?void 0:s.id),[]);let u=X(r,o,[n.value,n.children,o]),h=G(),v=L(d=>d.value&&d.value===u.current),R=L(d=>g||f.filter()===!1?!0:d.search?d.filtered.items.get(r)>0:!0);t.useEffect(()=>{let d=o.current;if(!(!d||n.disabled))return d.addEventListener(K,C),()=>d.removeEventListener(K,C)},[R,n.onSelect,n.disabled]);function C(){var d,b;M(),(b=(d=m.current).onSelect)==null||b.call(d,u.current)}function M(){h.setState("value",u.current,!0)}if(!R)return null;let{disabled:E,value:k,onSelect:N,...y}=n;return t.createElement("div",{ref:A([o,a]),...y,id:r,"cmdk-item":"",role:"option","aria-disabled":E||void 0,"aria-selected":v||void 0,"data-disabled":E||void 0,"data-selected":v||void 0,onPointerMove:E?void 0:M,onClick:E?void 0:C},n.children)}),ge=t.forwardRef((n,a)=>{let{heading:r,children:o,forceMount:s,...f}=n,m=t.useId(),g=t.useRef(null),u=t.useRef(null),h=t.useId(),v=H(),R=L(E=>s||v.filter()===!1?!0:E.search?E.filtered.groups.has(m):!0);D(()=>v.group(m),[]),X(m,g,[n.value,n.heading,u]);let C=t.useMemo(()=>({id:m,forceMount:s}),[s]),M=t.createElement(J.Provider,{value:C},o);return t.createElement("div",{ref:A([g,a]),...f,"cmdk-group":"",role:"presentation",hidden:R?void 0:!0},r&&t.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:h},r),t.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?h:void 0},M))}),pe=t.forwardRef((n,a)=>{let{alwaysRender:r,...o}=n,s=t.useRef(null),f=L(m=>!m.search);return!r&&!f?null:t.createElement("div",{ref:A([s,a]),...o,"cmdk-separator":"",role:"separator"})}),Re=t.forwardRef((n,a)=>{let{onValueChange:r,...o}=n,s=n.value!=null,f=G(),m=L(v=>v.search),g=L(v=>v.value),u=H(),h=t.useMemo(()=>{var R;let v=(R=u.commandRef.current)==null?void 0:R.querySelector(`${B}[${x}="${g}"]`);return v==null?void 0:v.getAttribute("id")},[g,u.commandRef]);return t.useEffect(()=>{n.value!=null&&f.setState("search",n.value)},[n.value]),t.createElement("input",{ref:a,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":h,id:u.inputId,type:"text",value:s?n.value:m,onChange:v=>{s||f.setState("search",v.target.value),r==null||r(v.target.value)}})}),be=t.forwardRef((n,a)=>{let{children:r,...o}=n,s=t.useRef(null),f=t.useRef(null),m=H();return t.useEffect(()=>{if(f.current&&s.current){let g=f.current,u=s.current,h,v=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let R=g.offsetHeight;u.style.setProperty("--cmdk-list-height",R.toFixed(1)+"px")})});return v.observe(g),()=>{cancelAnimationFrame(h),v.unobserve(g)}}},[]),t.createElement("div",{ref:A([s,a]),...o,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:m.listId,"aria-labelledby":m.inputId},t.createElement("div",{ref:f,"cmdk-list-sizer":""},r))}),he=t.forwardRef((n,a)=>{let{open:r,onOpenChange:o,overlayClassName:s,contentClassName:f,container:m,...g}=n;return t.createElement(T.Root,{open:r,onOpenChange:o},t.createElement(T.Portal,{container:m},t.createElement(T.Overlay,{"cmdk-overlay":"",className:s}),t.createElement(T.Content,{"aria-label":n.label,"cmdk-dialog":"",className:f},t.createElement(ie,{ref:a,...g}))))}),Ee=t.forwardRef((n,a)=>{let r=t.useRef(!0),o=L(s=>s.filtered.count===0);return t.useEffect(()=>{r.current=!1},[]),r.current||!o?null:t.createElement("div",{ref:a,...n,"cmdk-empty":"",role:"presentation"})}),Se=t.forwardRef((n,a)=>{let{progress:r,children:o,...s}=n;return t.createElement("div",{ref:a,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},t.createElement("div",{"aria-hidden":!0},o))}),Te=Object.assign(ie,{List:be,Item:ve,ItemLink:me,Input:Re,Group:ge,Separator:pe,Dialog:he,Empty:Ee,Loading:Se});function Ce(n,a){let r=n.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function ye(n,a){let r=n.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function Q(n){let a=t.useRef(n);return D(()=>{a.current=n}),a}var D=typeof window>"u"?t.useEffect:t.useLayoutEffect;function P(n){let a=t.useRef();return a.current===void 0&&(a.current=n()),a}function A(n){return a=>{n.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}function L(n){let a=G(),r=()=>n(a==null?void 0:a.snapshot());return t.useSyncExternalStore(a==null?void 0:a.subscribe,r,r)}function X(n,a,r){let o=t.useRef(),s=H();return D(()=>{var m;let f=(()=>{var g;for(let u of r){if(typeof u=="string")return u.trim().toLowerCase();if(typeof u=="object"&&"current"in u&&u.current)return(g=u.current.textContent)==null?void 0:g.trim().toLowerCase()}})();s.value(n,f),(m=a.current)==null||m.setAttribute(x,f),o.current=f}),o}var xe=()=>{let[n,a]=t.useState(),r=P(()=>new Map);return D(()=>{r.current.forEach(o=>o()),r.current=new Map},[n]),(o,s)=>{r.current.set(o,s),a({})}},Le={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};export{Te as Command,he as CommandDialog,Ee as CommandEmpty,ge as CommandGroup,Re as CommandInput,ve as CommandItem,me as CommandItemLink,be as CommandList,Se as CommandLoading,ie as CommandRoot,pe as CommandSeparator,L as useCommandState};
