import{a as oe}from"./chunk-XJATAMEX.mjs";import*as I from"@radix-ui/react-dialog";import*as e from"react";var le='[cmdk-list-sizer=""]',G='[cmdk-group=""]',J='[cmdk-group-items=""]',de='[cmdk-group-heading=""]',Q='[cmdk-item=""]',ae=`${Q}:not([aria-disabled="true"])`,K="cmdk-item-select",M="data-value",fe=(n,a)=>oe(n,a),ce=e.createContext(void 0),P=()=>e.useContext(ce),se=e.createContext(void 0),N=()=>e.useContext(se),_=e.createContext(void 0),ie=e.forwardRef((n,a)=>{let r=e.useRef(null),o=A(()=>{var t;return{search:"",value:n.value??((t=n.defaultValue)==null?void 0:t.toLowerCase())??"",filtered:{count:0,items:new Map,groups:new Set}}}),c=A(()=>new Set),f=A(()=>new Map),m=A(()=>new Map),v=A(()=>new Set),l=X(n),{label:p,children:g,value:C,onValueChange:h,filter:y,shouldFilter:b,...H}=n,j=e.useId(),E=e.useId(),w=e.useId(),d=Le();k(()=>{if(C!==void 0){let t=C.trim().toLowerCase();o.current.value=t,d(6,Z),S.emit()}},[C]);let S=e.useMemo(()=>({subscribe:t=>(v.current.add(t),()=>v.current.delete(t)),snapshot:()=>o.current,setState:(t,u,s)=>{var i,R,x;if(!Object.is(o.current[t],u)){if(o.current[t]=u,t==="search")z(),W(),d(1,q);else if(t==="value")if(((i=l.current)==null?void 0:i.value)!==void 0){let D=u??"";(x=(R=l.current).onValueChange)==null||x.call(R,D);return}else s||d(5,Z);S.emit()}},emit:()=>{v.current.forEach(t=>t())}}),[]),$=e.useMemo(()=>({value:(t,u)=>{u!==m.current.get(t)&&(m.current.set(t,u),o.current.filtered.items.set(t,Y(u)),d(2,()=>{W(),S.emit()}))},item:(t,u)=>(c.current.add(t),u&&(f.current.has(u)?f.current.get(u).add(t):f.current.set(u,new Set([t]))),d(3,()=>{z(),W(),o.current.value||q(),S.emit()}),()=>{m.current.delete(t),c.current.delete(t),o.current.filtered.items.delete(t);let s=O();d(4,()=>{z(),(s==null?void 0:s.getAttribute("id"))===t&&q(),S.emit()})}),group:t=>(f.current.has(t)||f.current.set(t,new Set),()=>{m.current.delete(t),f.current.delete(t)}),filter:()=>l.current.shouldFilter,label:p||n["aria-label"],commandRef:r,listId:j,inputId:w,labelId:E}),[]);function Y(t){var s;let u=((s=l.current)==null?void 0:s.filter)??fe;return t?u(t,o.current.search):0}function W(){if(!r.current||!o.current.search||l.current.shouldFilter===!1)return;let t=o.current.filtered.items,u=[];o.current.filtered.groups.forEach(i=>{let R=f.current.get(i),x=0;R.forEach(D=>{let ue=t.get(D);x=Math.max(ue,x)}),u.push([i,x])});let s=r.current.querySelector(le);V().sort((i,R)=>{let x=i.getAttribute(M),D=R.getAttribute(M);return(t.get(D)??0)-(t.get(x)??0)}).forEach(i=>{let R=i.closest(J);R?R.appendChild(i.parentElement===R?i:i.closest(`${J} > *`)):s.appendChild(i.parentElement===s?i:i.closest(`${J} > *`))}),u.sort((i,R)=>R[1]-i[1]).forEach(i=>{let R=r.current.querySelector(`${G}[${M}="${i[0]}"]`);R==null||R.parentElement.appendChild(R)})}function q(){let t=V().find(s=>!s.ariaDisabled),u=t==null?void 0:t.getAttribute(M);S.setState("value",u||void 0)}function z(){if(!o.current.search||l.current.shouldFilter===!1){o.current.filtered.count=c.current.size;return}o.current.filtered.groups=new Set;let t=0;for(let u of c.current){let s=m.current.get(u),i=Y(s);o.current.filtered.items.set(u,i),i>0&&t++}for(let[u,s]of f.current)for(let i of s)if(o.current.filtered.items.get(i)>0){o.current.filtered.groups.add(u);break}o.current.filtered.count=t}function Z(){var u,s,i;let t=O();t&&(((u=t.parentElement)==null?void 0:u.firstChild)===t&&((i=(s=t.closest(G))==null?void 0:s.querySelector(de))==null||i.scrollIntoView({block:"nearest"})),t.scrollIntoView({block:"nearest"}))}function O(){var t;return(t=r.current)==null?void 0:t.querySelector(`${Q}[aria-selected="true"]`)}function V(){return Array.from(r.current.querySelectorAll(ae))}function U(t){let s=V()[t];s&&S.setState("value",s.getAttribute(M))}function B(t){var x;let u=O(),s=V(),i=s.findIndex(D=>D===u),R=s[i+t];(x=l.current)!=null&&x.loop&&(R=i+t<0?s[s.length-1]:i+t===s.length?s[0]:s[i+t]),R&&S.setState("value",R.getAttribute(M))}function ee(t){let u=O(),s=u==null?void 0:u.closest(G),i;for(;s&&!i;)s=t>0?ye(s,G):xe(s,G),i=s==null?void 0:s.querySelector(ae);i?S.setState("value",i.getAttribute(M)):B(t)}let te=()=>U(V().length-1),ne=t=>{t.preventDefault(),t.metaKey?te():t.altKey?ee(1):B(1)},re=t=>{t.preventDefault(),t.metaKey?U(0):t.altKey?ee(-1):B(-1)};return e.createElement("div",{ref:T([r,a]),...H,"cmdk-root":"",onKeyDown:t=>{var u;if((u=H.onKeyDown)==null||u.call(H,t),!t.defaultPrevented)switch(t.key){case"n":case"j":{t.ctrlKey&&ne(t);break}case"ArrowDown":{ne(t);break}case"p":case"k":{t.ctrlKey&&re(t);break}case"ArrowUp":{re(t);break}case"Home":{t.preventDefault(),U(0);break}case"End":{t.preventDefault(),te();break}case"Enter":{console.log("In the enter..."),console.log("Current Event: ",t),t.preventDefault();let s=O();if(s){let i=new Event(K);s.dispatchEvent(i)}}}}},e.createElement("label",{"cmdk-label":"",htmlFor:$.inputId,id:$.labelId,style:Me},p),e.createElement(se.Provider,{value:S},e.createElement(ce.Provider,{value:$},g)))}),me=e.forwardRef((n,a)=>{var w;let r=e.useId(),o=e.useRef(null),c=e.useContext(_),f=P(),m=X(n),v=((w=m.current)==null?void 0:w.forceMount)??(c==null?void 0:c.forceMount);k(()=>f.item(r,c==null?void 0:c.id),[]);let l=F(r,o,[n.value,n.children,o]),p=N(),g=L(d=>d.value&&d.value===l.current),C=L(d=>v||f.filter()===!1?!0:d.search?d.filtered.items.get(r)>0:!0);e.useEffect(()=>{let d=o.current;if(!(!d||n.disabled))return d.addEventListener(K,h),()=>d.removeEventListener(K,h)},[C,n.onSelect,n.disabled]),e.useEffect(()=>{var d;g&&(console.log("Current Ref: ",o.current),console.log("Current Input Ref: ",n.inputRef.current),o.current&&n.inputRef.current&&((d=o.current)==null||d.focus(),n.inputRef.current.focus()))},[g]);function h(){var d,S;y(),(S=(d=m.current).onSelect)==null||S.call(d,l.current),o.current.click()}function y(){p.setState("value",l.current,!0)}if(!C)return null;let{disabled:b,value:H,onSelect:j,...E}=n;return n.CustomAnchorTag?e.createElement(n.CustomAnchorTag,{to:n.href,prefetch:"intent",ref:T([o,a]),id:r,"cmdk-item":"",role:"option","aria-disabled":b||void 0,"aria-selected":g||void 0,"data-disabled":b||void 0,"data-selected":g||void 0,onPointerMove:b?void 0:y,onClick:b?void 0:h,className:E.className,defaultChecked:E.defaultChecked,defaultValue:E.defaultValue,suppressContentEditableWarning:E.suppressContentEditableWarning,suppressHydrationWarning:E.suppressHydrationWarning,accessKey:E.accessKey},n.children):e.createElement("a",{href:n.href,ref:T([o,a]),id:r,"cmdk-item":"",role:"option","aria-disabled":b||void 0,"aria-selected":g||void 0,"data-disabled":b||void 0,"data-selected":g||void 0,onPointerMove:b?void 0:y,onClick:b?void 0:h,className:E.className,defaultChecked:E.defaultChecked,defaultValue:E.defaultValue,suppressContentEditableWarning:E.suppressContentEditableWarning,suppressHydrationWarning:E.suppressHydrationWarning,accessKey:E.accessKey},n.children)}),ve=e.forwardRef((n,a)=>{var w;let r=e.useId(),o=e.useRef(null),c=e.useContext(_),f=P(),m=X(n),v=((w=m.current)==null?void 0:w.forceMount)??(c==null?void 0:c.forceMount);k(()=>f.item(r,c==null?void 0:c.id),[]);let l=F(r,o,[n.value,n.children,o]),p=N(),g=L(d=>d.value&&d.value===l.current),C=L(d=>v||f.filter()===!1?!0:d.search?d.filtered.items.get(r)>0:!0);e.useEffect(()=>{let d=o.current;if(!(!d||n.disabled))return d.addEventListener(K,h),()=>d.removeEventListener(K,h)},[C,n.onSelect,n.disabled]);function h(){var d,S;y(),(S=(d=m.current).onSelect)==null||S.call(d,l.current)}function y(){p.setState("value",l.current,!0)}if(!C)return null;let{disabled:b,value:H,onSelect:j,...E}=n;return e.createElement("div",{ref:T([o,a]),...E,id:r,"cmdk-item":"",role:"option","aria-disabled":b||void 0,"aria-selected":g||void 0,"data-disabled":b||void 0,"data-selected":g||void 0,onPointerMove:b?void 0:y,onClick:b?void 0:h},n.children)}),ge=e.forwardRef((n,a)=>{let{heading:r,children:o,forceMount:c,...f}=n,m=e.useId(),v=e.useRef(null),l=e.useRef(null),p=e.useId(),g=P(),C=L(b=>c||g.filter()===!1?!0:b.search?b.filtered.groups.has(m):!0);k(()=>g.group(m),[]),F(m,v,[n.value,n.heading,l]);let h=e.useMemo(()=>({id:m,forceMount:c}),[c]),y=e.createElement(_.Provider,{value:h},o);return e.createElement("div",{ref:T([v,a]),...f,"cmdk-group":"",role:"presentation",hidden:C?void 0:!0},r&&e.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),e.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0,className:n.customchildclassname},y))}),Re=e.forwardRef((n,a)=>{let{heading:r,children:o,forceMount:c,...f}=n,m=e.useId(),v=e.useRef(null),l=e.useRef(null),p=e.useId(),g=P(),C=L(b=>c||g.filter()===!1?!0:b.search?b.filtered.groups.has(m):!0);k(()=>g.group(m),[]),F(m,v,[n.value,n.heading,l]);let h=e.useMemo(()=>({id:m,forceMount:c}),[c]),y=e.createElement(_.Provider,{value:h},o);return e.createElement("div",{ref:T([v,a]),...f,"cmdk-group":"",role:"presentation",hidden:C?void 0:!0},r&&e.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),e.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},y))}),pe=e.forwardRef((n,a)=>{let{alwaysRender:r,...o}=n,c=e.useRef(null),f=L(m=>!m.search);return!r&&!f?null:e.createElement("div",{ref:T([c,a]),...o,"cmdk-separator":"",role:"separator"})}),he=e.forwardRef((n,a)=>{var C;let{onValueChange:r,...o}=n,c=n.value!=null,f=N(),m=L(h=>h.search),v=L(h=>h.value),l=P(),p=(C=l.commandRef.current)==null?void 0:C.querySelector(`${Q}[${M}="${v}"]`),g=e.useMemo(()=>p==null?void 0:p.getAttribute("id"),[p]);return e.useEffect(()=>{n.value!=null&&f.setState("search",n.value)},[n.value]),e.createElement("input",{ref:a,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":g,id:l.inputId,type:"text",value:c?n.value:m,onChange:h=>{c||f.setState("search",h.target.value),r==null||r(h.target.value)}})}),be=e.forwardRef((n,a)=>{let{children:r,...o}=n,c=e.useRef(null),f=e.useRef(null),m=P();return e.useEffect(()=>{if(f.current&&c.current){let v=f.current,l=c.current,p,g=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let C=v.offsetHeight;l.style.setProperty("--cmdk-list-height",C.toFixed(1)+"px")})});return g.observe(v),()=>{cancelAnimationFrame(p),g.unobserve(v)}}},[]),e.createElement("div",{ref:T([c,a]),...o,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:m.listId,"aria-labelledby":m.inputId},e.createElement("div",{ref:f,"cmdk-list-sizer":""},r))}),Ce=e.forwardRef((n,a)=>{let{open:r,onOpenChange:o,overlayClassName:c,contentClassName:f,container:m,...v}=n;return e.createElement(I.Root,{open:r,onOpenChange:o},e.createElement(I.Portal,{container:m},e.createElement(I.Overlay,{"cmdk-overlay":"",className:c}),e.createElement(I.Content,{"aria-label":n.label,"cmdk-dialog":"",className:f},e.createElement(ie,{ref:a,...v}))))}),Ee=e.forwardRef((n,a)=>{let r=e.useRef(!0),o=L(c=>c.filtered.count===0);return e.useEffect(()=>{r.current=!1},[]),r.current||!o?null:e.createElement("div",{ref:a,...n,"cmdk-empty":"",role:"presentation"})}),Se=e.forwardRef((n,a)=>{let{progress:r,children:o,...c}=n;return e.createElement("div",{ref:a,...c,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},e.createElement("div",{"aria-hidden":!0},o))}),Ie=Object.assign(ie,{List:be,CustomItem:me,Item:ve,Input:he,CustomGroup:ge,Group:Re,Separator:pe,Dialog:Ce,Empty:Ee,Loading:Se});function ye(n,a){let r=n.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function xe(n,a){let r=n.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function X(n){let a=e.useRef(n);return k(()=>{a.current=n}),a}var k=typeof window>"u"?e.useEffect:e.useLayoutEffect;function A(n){let a=e.useRef();return a.current===void 0&&(a.current=n()),a}function T(n){return a=>{n.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}function L(n){let a=N(),r=()=>n(a==null?void 0:a.snapshot());return e.useSyncExternalStore(a==null?void 0:a.subscribe,r,r)}function F(n,a,r){let o=e.useRef(),c=P();return k(()=>{var m;let f=(()=>{var v;for(let l of r){if(typeof l=="string")return l.trim().toLowerCase();if(typeof l=="object"&&"current"in l&&l.current)return(v=l.current.textContent)==null?void 0:v.trim().toLowerCase()}})();c.value(n,f),(m=a.current)==null||m.setAttribute(M,f),o.current=f}),o}var Le=()=>{let[n,a]=e.useState(),r=A(()=>new Map);return k(()=>{r.current.forEach(o=>o()),r.current=new Map},[n]),(o,c)=>{r.current.set(o,c),a({})}},Me={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};export{Ie as Command,Ce as CommandDialog,Ee as CommandEmpty,Re as CommandGroup,ge as CommandGroupCustom,he as CommandInput,ve as CommandItem,me as CommandItemCustom,be as CommandList,Se as CommandLoading,ie as CommandRoot,pe as CommandSeparator,L as useCommandState};
