import{a as ae}from"./chunk-XJATAMEX.mjs";import*as k from"@radix-ui/react-dialog";import*as e from"react";var de='[cmdk-list-sizer=""]',j='[cmdk-group=""]',Y='[cmdk-group-items=""]',fe='[cmdk-group-heading=""]',Z='[cmdk-item=""]',ce=`${Z}:not([aria-disabled="true"])`,$="cmdk-item-select",D="data-value",me=(n,a)=>ae(n,a),se=e.createContext(void 0),V=()=>e.useContext(se),ie=e.createContext(void 0),U=()=>e.useContext(ie),B=e.createContext(void 0),le=e.forwardRef((n,a)=>{let r=e.useRef(null),o=G(()=>{var t;return{search:"",value:n.value??((t=n.defaultValue)==null?void 0:t.toLowerCase())??"",filtered:{count:0,items:new Map,groups:new Set}}}),c=G(()=>new Set),f=G(()=>new Map),u=G(()=>new Map),v=G(()=>new Set),d=ee(n),{label:R,children:g,value:m,onValueChange:y,filter:M,shouldFilter:C,shouldSort:W,...A}=n,N=e.useId(),P=e.useId(),h=e.useId(),b=Le();H(()=>{if(m!==void 0){let t=m.trim().toLowerCase();o.current.value=t,b(6,S),T.emit()}},[m]);let T=e.useMemo(()=>({subscribe:t=>(v.current.add(t),()=>v.current.delete(t)),snapshot:()=>o.current,setState:(t,l,s)=>{var i,p,x;if(!Object.is(o.current[t],l)){if(o.current[t]=l,t==="search")_(),K(),b(1,E);else if(t==="value")if(((i=d.current)==null?void 0:i.value)!==void 0){let O=l??"";(x=(p=d.current).onValueChange)==null||x.call(p,O);return}else s||b(5,S);T.emit()}},emit:()=>{v.current.forEach(t=>t())}}),[]),q=e.useMemo(()=>({value:(t,l)=>{l!==u.current.get(t)&&(u.current.set(t,l),o.current.filtered.items.set(t,z(l)),b(2,()=>{K(),T.emit()}))},item:(t,l)=>(c.current.add(t),l&&(f.current.has(l)?f.current.get(l).add(t):f.current.set(l,new Set([t]))),b(3,()=>{_(),K(),o.current.value||E(),T.emit()}),()=>{u.current.delete(t),c.current.delete(t),o.current.filtered.items.delete(t);let s=I();b(4,()=>{_(),(s==null?void 0:s.getAttribute("id"))===t&&E(),T.emit()})}),group:t=>(f.current.has(t)||f.current.set(t,new Set),()=>{u.current.delete(t),f.current.delete(t)}),filter:()=>d.current.shouldFilter,label:R||n["aria-label"],commandRef:r,listId:N,inputId:h,labelId:P}),[]);function z(t){var s;let l=((s=d.current)==null?void 0:s.filter)??me;return t?l(t,o.current.search):0}function K(){if(!r.current||!o.current.search||d.current.shouldSort===!1)return;let t=o.current.filtered.items,l=[];o.current.filtered.groups.forEach(i=>{let p=f.current.get(i),x=0;p.forEach(O=>{let ue=t.get(O);x=Math.max(ue,x)}),l.push([i,x])});let s=r.current.querySelector(de);F().sort((i,p)=>{let x=i.getAttribute(D),O=p.getAttribute(D);return(t.get(O)??0)-(t.get(x)??0)}).forEach(i=>{let p=i.closest(Y);p?p.appendChild(i.parentElement===p?i:i.closest(`${Y} > *`)):s.appendChild(i.parentElement===s?i:i.closest(`${Y} > *`))}),l.sort((i,p)=>p[1]-i[1]).forEach(i=>{let p=r.current.querySelector(`${j}[${D}="${i[0]}"]`);p==null||p.parentElement.appendChild(p)})}function E(){let t=F().find(s=>!s.ariaDisabled),l=t==null?void 0:t.getAttribute(D);T.setState("value",l||void 0)}function _(){if(!o.current.search||d.current.shouldFilter===!1){o.current.filtered.count=c.current.size;return}o.current.filtered.groups=new Set;let t=0;for(let l of c.current){let s=u.current.get(l),i=z(s);o.current.filtered.items.set(l,i),i>0&&t++}for(let[l,s]of f.current)for(let i of s)if(o.current.filtered.items.get(i)>0){o.current.filtered.groups.add(l);break}o.current.filtered.count=t}function S(){var l,s,i;let t=I();t&&(((l=t.parentElement)==null?void 0:l.firstChild)===t&&((i=(s=t.closest(j))==null?void 0:s.querySelector(fe))==null||i.scrollIntoView({block:"nearest"})),t.scrollIntoView({block:"nearest"}))}function I(){var t;return(t=r.current)==null?void 0:t.querySelector(`${Z}[aria-selected="true"]`)}function F(){return Array.from(r.current.querySelectorAll(ce))}function Q(t){let s=F()[t];s&&T.setState("value",s.getAttribute(D))}function X(t){var x;let l=I(),s=F(),i=s.findIndex(O=>O===l),p=s[i+t];(x=d.current)!=null&&x.loop&&(p=i+t<0?s[s.length-1]:i+t===s.length?s[0]:s[i+t]),p&&T.setState("value",p.getAttribute(D))}function te(t){let l=I(),s=l==null?void 0:l.closest(j),i;for(;s&&!i;)s=t>0?Te(s,j):xe(s,j),i=s==null?void 0:s.querySelector(ce);i?T.setState("value",i.getAttribute(D)):X(t)}let ne=()=>Q(F().length-1),re=t=>{t.preventDefault(),t.metaKey?ne():t.altKey?te(1):X(1)},oe=t=>{t.preventDefault(),t.metaKey?Q(0):t.altKey?te(-1):X(-1)};return e.createElement("div",{ref:w([r,a]),...A,"cmdk-root":"",onKeyDown:t=>{var l;if((l=A.onKeyDown)==null||l.call(A,t),!t.defaultPrevented)switch(t.key){case"n":case"j":{t.ctrlKey&&re(t);break}case"ArrowDown":{re(t);break}case"p":case"k":{t.ctrlKey&&oe(t);break}case"ArrowUp":{oe(t);break}case"Home":{t.preventDefault(),Q(0);break}case"End":{t.preventDefault(),ne();break}case"Enter":{t.preventDefault();let s=I();if(s){let i=new Event($);s.dispatchEvent(i)}}}}},e.createElement("label",{"cmdk-label":"",htmlFor:q.inputId,id:q.labelId,style:Me},R),e.createElement(ie.Provider,{value:T},e.createElement(se.Provider,{value:q},g)))}),ge=e.forwardRef((n,a)=>{var _;let r=e.useId(),o=e.useRef(null),c=e.useContext(B),f=V(),u=ee(n),v=((_=u.current)==null?void 0:_.forceMount)??(c==null?void 0:c.forceMount);H(()=>f.item(r,c==null?void 0:c.id),[]);let d=J(r,o,[n.value,n.children,o]),R=U(),g=L(S=>S.value&&S.value===d.current),m=L(S=>v||f.filter()===!1?!0:S.search?S.filtered.items.get(r)>0:!0);e.useEffect(()=>{let S=o.current;if(!(!S||n.disabled))return S.addEventListener($,P),()=>S.removeEventListener($,P)},[m,n.onSelect,n.disabled]);let[y,M]=e.useState(null),C=300,W=e.useRef(null),[A,N]=e.useState(!1);e.useEffect(()=>{g?(M(Date.now()),clearTimeout(W.current),W.current=setTimeout(()=>{console.log(`Selected option "${d}" for ${C} milliseconds.`),g&&N(!0)},C)):N(!1)},[g]);function P(){var S,I;h(),(I=(S=u.current).onSelect)==null||I.call(S,d.current),o.current.click()}function h(){R.setState("value",d.current,!0)}if(!m)return null;let{disabled:b,value:T,onSelect:q,CustomAnchorTag:z,CustomPrefetchElement:K,...E}=n;return e.useEffect(()=>{console.log("Selected: ",g),console.log("Selected At: ",y),console.log("Statement: ",g&&y+C<Date.now())},[]),n.CustomAnchorTag?e.createElement(z,{id:r,to:n.href,ref:w([o,a]),role:"option",onClick:b?void 0:P,prefetch:"none",accessKey:E.accessKey,className:E.className,"cmdk-item":"",defaultValue:E.defaultValue,"aria-disabled":b||void 0,"aria-selected":g||void 0,"data-disabled":b||void 0,"data-selected":g||void 0,onPointerMove:b?void 0:h,defaultChecked:E.defaultChecked,suppressHydrationWarning:E.suppressHydrationWarning,suppressContentEditableWarning:E.suppressContentEditableWarning},n.children,A?e.createElement(e.Fragment,null,K):null):e.createElement("a",{href:n.href,ref:w([o,a]),id:r,"cmdk-item":"",role:"option","aria-disabled":b||void 0,"aria-selected":g||void 0,"data-disabled":b||void 0,"data-selected":g||void 0,onPointerMove:b?void 0:h,onClick:b?void 0:P,className:E.className,defaultChecked:E.defaultChecked,defaultValue:E.defaultValue,suppressContentEditableWarning:E.suppressContentEditableWarning,suppressHydrationWarning:E.suppressHydrationWarning,accessKey:E.accessKey},n.children)}),ve=e.forwardRef((n,a)=>{var P;let r=e.useId(),o=e.useRef(null),c=e.useContext(B),f=V(),u=ee(n),v=((P=u.current)==null?void 0:P.forceMount)??(c==null?void 0:c.forceMount);H(()=>f.item(r,c==null?void 0:c.id),[]);let d=J(r,o,[n.value,n.children,o]),R=U(),g=L(h=>h.value&&h.value===d.current),m=L(h=>v||f.filter()===!1?!0:h.search?h.filtered.items.get(r)>0:!0);e.useEffect(()=>{let h=o.current;if(!(!h||n.disabled))return h.addEventListener($,y),()=>h.removeEventListener($,y)},[m,n.onSelect,n.disabled]);function y(){var h,b;M(),(b=(h=u.current).onSelect)==null||b.call(h,d.current)}function M(){R.setState("value",d.current,!0)}if(!m)return null;let{disabled:C,value:W,onSelect:A,...N}=n;return e.createElement("div",{ref:w([o,a]),...N,id:r,"cmdk-item":"",role:"option","aria-disabled":C||void 0,"aria-selected":g||void 0,"data-disabled":C||void 0,"data-selected":g||void 0,onPointerMove:C?void 0:M,onClick:C?void 0:y},n.children)}),Re=e.forwardRef((n,a)=>{let{heading:r,children:o,forceMount:c,...f}=n,u=e.useId(),v=e.useRef(null),d=e.useRef(null),R=e.useId(),g=V(),m=L(C=>c||g.filter()===!1?!0:C.search?C.filtered.groups.has(u):!0);H(()=>g.group(u),[]),J(u,v,[n.value,n.heading,d]);let y=e.useMemo(()=>({id:u,forceMount:c}),[c]),M=e.createElement(B.Provider,{value:y},o);return e.createElement("div",{ref:w([v,a]),...f,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&e.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:R},r),e.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?R:void 0,className:n.customchildclassname},M))}),pe=e.forwardRef((n,a)=>{let{heading:r,children:o,forceMount:c,...f}=n,u=e.useId(),v=e.useRef(null),d=e.useRef(null),R=e.useId(),g=V(),m=L(C=>c||g.filter()===!1?!0:C.search?C.filtered.groups.has(u):!0);H(()=>g.group(u),[]),J(u,v,[n.value,n.heading,d]);let y=e.useMemo(()=>({id:u,forceMount:c}),[c]),M=e.createElement(B.Provider,{value:y},o);return e.createElement("div",{ref:w([v,a]),...f,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&e.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:R},r),e.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?R:void 0},M))}),he=e.forwardRef((n,a)=>{let{alwaysRender:r,...o}=n,c=e.useRef(null),f=L(u=>!u.search);return!r&&!f?null:e.createElement("div",{ref:w([c,a]),...o,"cmdk-separator":"",role:"separator"})}),be=e.forwardRef((n,a)=>{let{onValueChange:r,loading:o,...c}=n,f=n.value!=null,u=U(),v=L(m=>m.search),d=L(m=>m.value),R=V(),g=e.useMemo(()=>{var y;let m=(y=R.commandRef.current)==null?void 0:y.querySelector(`${Z}[${D}="${d}"]`);return m==null?void 0:m.getAttribute("id")},[d,R.commandRef]);return e.useEffect(()=>{n.value!=null&&!o&&u.setState("search",n.value)},[n.value,o]),e.createElement("input",{ref:a,...c,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":R.listId,"aria-labelledby":R.labelId,"aria-activedescendant":g,id:R.inputId,type:"text",value:f?n.value:v,onChange:m=>{f||u.setState("search",m.target.value),r==null||r(m.target.value)}})}),Ee=e.forwardRef((n,a)=>{let{children:r,...o}=n,c=e.useRef(null),f=e.useRef(null),u=V();return e.useEffect(()=>{if(f.current&&c.current){let v=f.current,d=c.current,R,g=new ResizeObserver(()=>{R=requestAnimationFrame(()=>{let m=v.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return g.observe(v),()=>{cancelAnimationFrame(R),g.unobserve(v)}}},[]),e.createElement("div",{ref:w([c,a]),...o,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:u.listId,"aria-labelledby":u.inputId},e.createElement("div",{ref:f,"cmdk-list-sizer":""},r))}),Ce=e.forwardRef((n,a)=>{let{open:r,onOpenChange:o,overlayClassName:c,contentClassName:f,container:u,...v}=n;return e.createElement(k.Root,{open:r,onOpenChange:o},e.createElement(k.Portal,{container:u},e.createElement(k.Overlay,{"cmdk-overlay":"",className:c}),e.createElement(k.Content,{"aria-label":n.label,"cmdk-dialog":"",className:f},e.createElement(le,{ref:a,...v}))))}),Se=e.forwardRef((n,a)=>{let r=e.useRef(!0),o=L(c=>c.filtered.count===0);return e.useEffect(()=>{r.current=!1},[]),r.current||!o?null:e.createElement("div",{ref:a,...n,"cmdk-empty":"",role:"presentation"})}),ye=e.forwardRef((n,a)=>{let{progress:r,children:o,...c}=n;return e.createElement("div",{ref:a,...c,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},e.createElement("div",{"aria-hidden":!0},o))}),De=Object.assign(le,{List:Ee,CustomItem:ge,Item:ve,Input:be,CustomGroup:Re,Group:pe,Separator:he,Dialog:Ce,Empty:Se,Loading:ye});function Te(n,a){let r=n.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function xe(n,a){let r=n.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function ee(n){let a=e.useRef(n);return H(()=>{a.current=n}),a}var H=typeof window>"u"?e.useEffect:e.useLayoutEffect;function G(n){let a=e.useRef();return a.current===void 0&&(a.current=n()),a}function w(n){return a=>{n.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}function L(n){let a=U(),r=()=>n(a==null?void 0:a.snapshot());return e.useSyncExternalStore(a==null?void 0:a.subscribe,r,r)}function J(n,a,r){let o=e.useRef(),c=V();return H(()=>{var u;let f=(()=>{var v;for(let d of r){if(typeof d=="string")return d.trim().toLowerCase();if(typeof d=="object"&&"current"in d&&d.current)return(v=d.current.textContent)==null?void 0:v.trim().toLowerCase()}})();c.value(n,f),(u=a.current)==null||u.setAttribute(D,f),o.current=f}),o}var Le=()=>{let[n,a]=e.useState(),r=G(()=>new Map);return H(()=>{r.current.forEach(o=>o()),r.current=new Map},[n]),(o,c)=>{r.current.set(o,c),a({})}},Me={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};export{De as Command,Ce as CommandDialog,Se as CommandEmpty,pe as CommandGroup,Re as CommandGroupCustom,be as CommandInput,ve as CommandItem,ge as CommandItemCustom,Ee as CommandList,ye as CommandLoading,le as CommandRoot,he as CommandSeparator,L as useCommandState};
